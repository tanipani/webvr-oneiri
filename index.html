<html>

<head>
	<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
	<script src="https://unpkg.com/aframe-room-component/dist/aframe-room-component.min.js"></script>
</head>
<!--
MH 1997.26.2(https://sketchfab.com/models/0568746295de4aa5886a38ad811be600) by laurashea(https://sketchfab.com/laurashea) is licensed under CC Attribution-NonCommercial-ShareAlike(http://creativecommons.org/licenses/by-nc-sa/4.0/)

 -->

<body>
	<a-scene>

		<a-camera>
			<a-cursor></a-cursor>
		</a-camera>


		<!-- ASSETS (3D-Models) -->
		<a-assets>
			<a-asset-item id="temple" src="assets/temple/scene.gltf"></a-asset-item>
			<a-asset-item id="ramesses" src="assets/ramesses/scene.gltf"></a-asset-item>

			<img src="assets/wall_historic.jpg" id="wallTex" />
			<img src="assets/floor_historic.jpg" id="floorTex" />
			<img src="assets/wood_floor.jpg" id="woodFloorTex" />
			<img src="assets/wood_wall.jpg" id="woodWallTex" />
			<img src="assets/sand_2.jpg" id="sandTex" />
			<img src="assets/marble_wall.jpg" id="marbleWallTex" />
		</a-assets>

		<!-- ONEIRI ROOM -->
		<rw-room position="0 0 -1" class="scene1">
			<rw-floor material="src:#marbleWallTex; repeat:0.5 0.5"></rw-floor>
			<rw-ceiling material="src:#marbleWallTex; repeat:0.5 0.5"></rw-ceiling>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="-6 0 0"></rw-wall>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="-6 0 -8"></rw-wall>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="6 0 -8"></rw-wall>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="6 0 0">
				<rw-doorhole id="holeA"></rw-doorhole>
				<rw-doorlink from="#holeA" to="#holeB" position="5.5 0 1"></rw-doorlink>
			</rw-wall>
			<a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" id="clicker"></a-box>
		</rw-room>
		<!-- SPAWN POINT -->
		<rw-room position="0 0 0" class="scene1">
			<rw-floor material="src:#marbleWallTex; repeat:0.5 0.5"></rw-floor>
			<rw-ceiling material="src:#marbleWallTex; repeat:0.5 0.5"></rw-ceiling>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="-1 0 1"></rw-wall>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="-1 0 -1">
				<rw-doorhole id="holeB"></rw-doorhole>
			</rw-wall>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="1 0 -1"></rw-wall>
			<rw-wall material="src:#marbleWallTex; repeat:0.5 0.5" position="1 0 1"></rw-wall>
		</rw-room>


		<rw-room position="0 0 -1" class="scene2" visible="false">
			<rw-floor material="src:#floorTex; repeat:0.5 0.5"></rw-floor>
			<rw-ceiling material="src:#woodWallTex; repeat:0.5 0.5"></rw-ceiling>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="-6 0 0"></rw-wall>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="-6 0 -8"></rw-wall>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="6 0 -8"></rw-wall>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="6 0 0">
				<rw-doorhole id="holeC"></rw-doorhole>
				<rw-doorlink from="#holeC" to="#holeD" position="5.5 0 1"></rw-doorlink>
			</rw-wall>

			<!-- middle of the room -->
			<a-entity position="0 1 -3.5" geometry="primitive: cylinder; radius: 1; height: 2" material="color: white; shader: flat; src: assets/egypt_weitwinkel.jpg"></a-entity>

			<!-- large wall no door -->
			<a-entity position="3.75 1.2 -8" geometry="primitive: box; height: 2; depth: 0.1; width: 3" material="color: white; shader: flat; src: assets/wide_image.png"></a-entity>
			<a-entity position="1 1.2 -8" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/Maler_der_Grabkammer_der_Nefertari_004.jpg"></a-entity>
			<a-entity position="-1 1.2 -8" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/Ramesseum_siege_of_Dapur.jpg"></a-entity>
			<a-entity position="-3 1.2 -8" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/675px-KhonsuTemple-Karnak-RamessesIII-2.jpg"></a-entity>
			<a-entity position="-5 1.2 -8" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/Weihrauchopfer_RamsesIII_aus_KV11.jpg"></a-entity>

			<!-- left small wall -->
			<a-entity position="-5.99 1.2 -7" rotation="0 90 0" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/Maler_der_Grabkammer_der_Nefertari_004.jpg"></a-entity>
			<a-entity position="-5.99 1.2 -5" rotation="0 90 0" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/453px-Relief_of_Horus_and_Geb_from_KV14_(Kairoinfo4u).jpg"></a-entity>
			<a-entity position="-5.99 1.2 -3" rotation="0 90 0" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/ramesses_on_knee.jpg"></a-entity>
			<a-entity position="-5.99 1.2 -1" rotation="0 90 0" geometry="primitive: box; height: 2; depth: 0.1; width: 1.5" material="color: white; shader: flat; src: assets/Temple_of_Derr_relief_of_Ramesses_II.jpg"></a-entity>

			<!-- right small wall -->

			<!-- large wall with door -->


			<a-entity position="3 1.25 -1" scale="0.05 0.05 0.05" rotation="0 180 0" gltf-model="#ramesses"></a-entity>
			<a-entity position="5 1 -2" scale="0.3 0.3 0.3" rotation="0 180 0" gltf-model="#temple"></a-entity>
		</rw-room>
		<rw-room position="0 0 0" class="scene2" visible="false">
			<rw-floor material="src:#woodFloorTex; repeat:0.5 0.5"></rw-floor>
			<rw-ceiling material="src:#woodWallTex; repeat:0.5 0.5"></rw-ceiling>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="-1 0 1"></rw-wall>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="-1 0 -1">
				<rw-doorhole id="holeD"></rw-doorhole>
			</rw-wall>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="1 0 -1"></rw-wall>
			<rw-wall material="src:#woodWallTex; repeat:0.5 0.5" position="1 0 1"></rw-wall>
		</rw-room>

	</a-scene>


	<script type="text/javascript">


		let scaled = {};

		function nextScene() {
			console.log('asdasd');
			let scene1 = document.getElementsByClassName('scene1');
			for (let i = 0; i < scene1.length; i++) {
				// scene1[i].setAttribute('visible', 'false');
				scene1[i].parentNode.removeChild(scene1[i]);
			}
			let scene2 = document.getElementsByClassName('scene2');
			for (let i = 0; i < scene2.length; i++) {
				scene2[i].setAttribute('visible', 'true');
			}
		}

		function scaleEntity(ent, name) {
			if (scaled[name]) {
				ent.setAttribute('scale', '0.2 0.2 0.2');
			} else {
				ent.setAttribute('scale', '0.4 0.4 0.4');
			}
		}

		document.getElementById('clicker').addEventListener('click', function(evt) {
			nextScene();
		});
		// document.getElementById('entityChest').addEventListener('click', function(evt) {
		// 	scaleEntity(evt.target, 'entityChest');
		// });
	</script>

</body>

</html>
